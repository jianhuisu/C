第五章 操作符和表达式


操作符

    算数操作符  + - * /  %

        + - * /  可使用与 整形 与 浮点型
        %        只能使用于整形

    移位操作符
    位操作符

    赋值操作符

         x = y + 3

         x 、 y + 3  可以称为 操作数

         = 号可以称为 表达式

         赋值操作符的结合性（求值顺序）从左到右

         表达式运算顺序是从左向右, = 操作符的赋值顺序是从右向左(见order.c)


     复合赋值符

        所有的操作符还有一种复合赋值形式

        +=
        -=
        *=
        /=
        >>=
        <<=

        &=
        ~=
        ^=

        以上复合赋值操作可以用以下模式来概括

        a += expression
        a = a + (expression)

        执行顺序
            1 先对 expression 求值
            2 对 a 与 expression 表达式值 求和

        使用该复合形式原因

        1 提高程序可读性

            a[2*(b+c)] += c*(b+c) - d

            代表

            a[2*(b+c)] = a[2*(b+c)] + (c*(b+c) - d)

            如果直接写成第二种形式
            我们需要 比对 左操作数 与 右操作数的前半段有无不同


        2 提高程序执行效率

           编译器解析时 第一种方式只计算一次下标  第二种需要计算两次

       单目操作符
             ++
             --
                    在操作数之前的操作符先改变原有的值,然后使用
                    在操作数之后的操作符先使用,然后改变原有的值

                   ++a = 10 这是一种错误写法
             +
             -      产生操作数的负值
             ~      对操作数进行求补操作
             !      逻辑反操作
             *      间接访问操作符 与指针一起使用 访问指针指向地址的值
             &      产生操作数的地址
             sizeof()  判断操作数的类型、长度   sizeof(a)  sizeof a 两种写法均可

                    sizeof(int)  返回当前环境整型变量的字节数
                    sizeof x     当 x 是整型数组时 该表达式返回的是 数组的长度 以字节为单位


        强制类型转换 cast
            (类型) 操作符

            (int)b 、 (float)a 显式的将表达式的值转换为另外的值


        关系操作符
            >
            >=
            <
            <=
            !=
            ==

            C 用整数来表示布尔值 整数 0 表示 假 非0 整数表示真
            如果操作符两端的操作数不符合操作符指定的关系, 返回  0  , 否则 返回 1


        逻辑操作符
           expression1 && expression2
           expression1 || expression2

           短路求值
            expression1 && expression2  如果exp1 为假 那么不会执行exp2

            expression1 || expression2  如果exp1 为真  那么不执行exp2

            defined('YII_ENV') || define('YII_ENV','test')

        条件操作符（三元运算符）
            expression ? expression2 : expression3 ;

        逗号操作符
            逗号操作符将两个或者多个表达式分割开 自左向右逐个求值   整个逗号表达式的最终返回值 为 最右边表达式的返回值

            if(a++,a>1,d>0)
            {

            }

        下标引用、函数调用、结构成员
            array[下标]
            .                     s.a  如果s是一个结构变量 那么 s.a 可以称为访问 s的成员 a
            ->                    指针操作符



表达式
操作数
操作符
    a =  b + c
    a、b+c 都可以称为 操作数
    = 号 称为操作符
    b + c 可以称为 表达式

语句
    if、while、switch、for 等


左值和右值
    L-value  可以出现在赋值操作符左边的东西
    R-value   可以出现在赋值操作符右边的东西


表达式求值

int a,*b;

a = 2;
b = &a;

现在 变量b 的值为  变量a 的地址 ,但是 *b 的值为 a 的值 ：2

* 间接访问操作符 与指针一起使用 用于访问指针所指向的值

int *p;

p = &a;
*p = 20;

变量 p的值 是某个内存中特定的地址,而 * 操作符使机器指向那个位置

当它当做 L-value 使用时 这个表达式指定需要修改的位置
当它当做 R-value 使用时 这个表达式提取存储这个位置的值


------------------------------------------副作用---------------------------------------


不是函数的副作用，是表达式的副作用。函数调用只是表达式的一种而已。
对于一个表达式，它的效果分为两部分——结果和副作用。结果就是表达式的值，比如1+1得结果就是2。副作用是表达式除了产生结果以外产生的其他效果。比如i++，结果i原来的值，副作用是给i的内容+1。
对于函数，比如：
int f()
{
    puts("Hello.")
    return 3;
}
结果是3，副作用是在屏幕上显示Hello.