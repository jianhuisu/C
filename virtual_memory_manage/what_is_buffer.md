## 缓冲区

### 缓冲区概念

    char buf[10];
    strncpy(buf, "hello world", sizeof(buf));
    // man 3 strncpy 

**像`buf`这种由调用者分配并传给函数读或写的一段内存通常称为缓冲区（`Buffer`）**，缓冲区写越界的错误称为缓冲区溢出（`Buffer Overflow`）。
如果只是出现段错误那还不算严重，更严重的是缓冲区溢出`Bug`经常被恶意用户利用，使函数返回时跳转到一个事先设好的地址，执行事先设好的指令，
如果设计得巧妙甚至可以启动一个Shell，然后随心所欲执行任何命令，可想而知，如果一个用`root`权限执行的程序存在这样的`Bug`，被攻陷了，后果将很严重。

在web应用环境中，通过socket一个字节一个字节的传输消息的方式对性能并不好。
更好的方式是把所有内容一次性传输给服务器，或者至少是一块一块地传输。层与层之间的数据交换的次数越少，性能越好。
(它们是为了防止出现过大量的细小的写入操作，从而造成访问SAPI层过于频繁，这样网络消耗会很大，不利于性能)
你应该总是保持输出缓冲区处于可用状态.

