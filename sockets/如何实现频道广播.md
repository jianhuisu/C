# 如何实现频道广播

在Go里面，channel是一种非常关键、方便的通信机制，但是通常我们想要将消息传递给多个消费者可能需要建立多个通道。
只要channel的某个消息被某个消费者读取了，那么该值就会被移除，而其他消费者将不会再消费这个消息。
如果我们想实现广播方式我们可能需要将消息写入N个channel。例如：

    func main() {
    	ch := make(chan int)
    	var wg sync.WaitGroup
    	wg.Add(2)
    	go func() {
    		for v := range ch {
    			fmt.Println("A", v)
    		}
    		wg.Done()
    	}()
    	go func() {
    		for v := range ch {
    			fmt.Println("B", v)
    		}
    		wg.Done()
    	}()
    	
    	// 频道写入消息 两个消费者协程抢占式消费消息
    	ch <- 1
    	ch <- 2
    	close(ch)
    	wg.Wait()
    }




作者：朗月清风
链接：https://juejin.im/post/6844903857395335182
来源：掘金
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。